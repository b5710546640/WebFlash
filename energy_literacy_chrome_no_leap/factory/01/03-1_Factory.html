<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
	<head>
		<title>03-1_Factory+</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<style type="text/css" media="screen">
		html, body { height:100%; background-color: #ffffff;}
		body { margin:0; padding:0; overflow:hidden; }
		#flashContent { width:100%; height:100%; }
		</style>
		<script src="http://js.leapmotion.com/0.2.0/leap.js"></script>
	</head>
	<body>
		<div id="flashContent">
			<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="100%%" height="100%%" id="03-1_Factory+" align="middle">
				<param name="movie" value="03-1_Factory+.swf" />
				<param name="quality" value="best" />
				<param name="bgcolor" value="#ffffff" />
				<param name="play" value="true" />
				<param name="loop" value="true" />
				<param name="wmode" value="window" />
				<param name="scale" value="showall" />
				<param name="menu" value="true" />
				<param name="devicefont" value="false" />
				<param name="salign" value="" />
				<param name="allowScriptAccess" value="sameDomain" />
				<!--[if !IE]>-->
				<object type="application/x-shockwave-flash" data="03-1_Factory+.swf" width="100%%" height="100%%">
					<param name="movie" value="03-1_Factory+.swf" />
					<param name="quality" value="best" />
					<param name="bgcolor" value="#ffffff" />
					<param name="play" value="true" />
					<param name="loop" value="true" />
					<param name="wmode" value="window" />
					<param name="scale" value="showall" />
					<param name="menu" value="true" />
					<param name="devicefont" value="false" />
					<param name="salign" value="" />
					<param name="allowScriptAccess" value="sameDomain" />
				<!--<![endif]-->
					<a href="http://www.adobe.com/go/getflash">
						<img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
					</a>
				<!--[if !IE]>-->
				</object>
				<!--<![endif]-->
			</object>
		</div>
		<script>
		var debug=0;            // increasing level of debug output
		var numSwipes=0;        // total count of swipes seen
		var numSwipesLeft=0;
		var numSwipesRight=0;
		var numTaps=0;

		var controller = new Leap.Controller({enableGestures: true});

		controller.on('connect', function() {
			console.log("leapmotion:sucessful connection");
			// foundLeap(); // let the user know we found it
		});

		controller.on('deviceConnected', function() {
			console.log("leapmotion:leap device has been connected");
		});

		controller.on('deviceDisconnected', function() {
			console.log("leapmotion:device disconnect");
		});

		// the gesture callback occurs on gesture detection by the leap controller,
		// from here you decide which gestures that you want to handle
		controller.on('gesture', function (gesture) {
				if (gesture.type == 'swipe') {
					handleSwipe(gesture);
				}
				if (gesture.type == 'screenTap') {
					handleTap(gesture);
				}

		});

		// this is where start using the leap (if one is detected)
		controller.connect();

		// this function is called when we want to handle a swipe gesture,
		// we are just going to keep a few counts of what was detected
		function handleSwipe(swipe) {
			if (swipe.state == 'stop') {
				if (debug>0) console.log("found a swipe, " + numSwipes);
				numSwipes++;

				// the swipe object will tell us which direction the swipe was in
				if (swipe.direction[0] > 0) {
					window.location.href = '../../selectsource.html';
					numSwipesRight++;
				} else {
					window.location.href = '04-1_ElectricSystem.html';
					console.log('back');
					numSwipesLeft++;
				}
			}

			// update the webpage with out current count data
			// refreshCounts();
		}

		// taps (poke at the screen) seem a little more difficult to detect correctly,
		// i am regularly either missing the tap or getting both a swipe and a tap detection
		// (but at least it is doing something)
		function handleTap(tap) {
				if (debug>0) console.log("found a tap, " + numTaps);
				numTaps++;

			// update the webpage with out current count data
			// refreshCounts();

		}


			setTimeout(function(){ window.location.href = '04-1_Transmission.html'; }, 15000);
		</script>
	</body>
</html>
